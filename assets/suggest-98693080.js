import{d as J,l as o,u as K,N as r,z as R,m as q,n as z,C as A,o as x,j as w,q as s,w as b,v as O,x as I,F as H,s as Q,t as y,B as L,D as E,y as W,p as X,A as Y}from"./index-15628d6c.js";import{d as Z}from"./index-f79b59ca.js";import"./index-5b75d705.js";const ee={class:"bg-base-100 p-4 rounded text-center"},ne={class:"flex text-center"},ae=["value"],se=["value"],te=["value"],oe={class:"text-main mt-5"},ie={class:"mt-4 mb-4"},le=s("div",{class:"mt-4"}," If the chain is not offically support on Keplr/Metamask Snap, you can submit these parameters to enable Keplr/Metamask Snap. ",-1),pe=J({__name:"suggest",setup(ce){const U=o(""),i=o(""),f=K(),l=o({}),t=o("keplr"),g=o(r.Mainnet),_=o([]),P=o([]),$=R(()=>g.value===r.Mainnet?_.value:P.value);q(()=>{const e=z();l.value=e.current||Object.values(f.chains)[0],C(),f.loadLocalConfig(r.Mainnet).then(n=>{_.value=Object.values(n)}),f.loadLocalConfig(r.Testnet).then(n=>{P.value=Object.values(n)})});function k(){t.value==="keplr"?C():j()}async function C(){var d,u,p,m,v,D,M,S,T,B,V;const e=l.value;if(!((u=(d=e.endpoints)==null?void 0:d.rest)!=null&&u.at(0)))throw new Error("Endpoint does not set");const N=(await A.newDefault(((m=(p=e.endpoints.rest)==null?void 0:p.at(0))==null?void 0:m.address)||"").getBaseBlockLatest()).block.header.chain_id,h=e.keplrPriceStep||{low:.01,average:.025,high:.03},c=((v=e.assets[0].denom_units.find(G=>G.denom===e.assets[0].symbol.toLowerCase()))==null?void 0:v.exponent)||6;i.value=JSON.stringify({chainId:N,chainName:e.chainName,rpc:(S=(M=(D=e.endpoints)==null?void 0:D.rpc)==null?void 0:M.at(0))==null?void 0:S.address,rest:(V=(B=(T=e.endpoints)==null?void 0:T.rest)==null?void 0:B.at(0))==null?void 0:V.address,bip44:{coinType:Number(e.coinType)},coinType:Number(e.coinType),bech32Config:{bech32PrefixAccAddr:e.bech32Prefix,bech32PrefixAccPub:`${e.bech32Prefix}pub`,bech32PrefixValAddr:`${e.bech32Prefix}valoper`,bech32PrefixValPub:`${e.bech32Prefix}valoperpub`,bech32PrefixConsAddr:`${e.bech32Prefix}valcons`,bech32PrefixConsPub:`${e.bech32Prefix}valconspub`},currencies:[{coinDenom:e.assets[0].symbol,coinMinimalDenom:e.assets[0].base,coinDecimals:c,coinGeckoId:e.assets[0].coingecko_id||"unknown"}],feeCurrencies:[{coinDenom:e.assets[0].symbol,coinMinimalDenom:e.assets[0].base,coinDecimals:c,coinGeckoId:e.assets[0].coingecko_id||"unknown",gasPriceStep:h}],gasPriceStep:h,stakeCurrency:{coinDenom:e.assets[0].symbol,coinMinimalDenom:e.assets[0].base,coinDecimals:c,coinGeckoId:e.assets[0].coingecko_id||"unknown"},features:e.keplrFeatures||[]},null,"	")}async function j(){var c,d,u,p,m;const e=l.value,[n]=e.assets;if(!((d=(c=e.endpoints)==null?void 0:c.rest)!=null&&d.at(0)))throw new Error("Endpoint does not set");const h=(await A.newDefault(((p=(u=e.endpoints.rest)==null?void 0:u.at(0))==null?void 0:p.address)||"").getBaseBlockLatest()).block.header.chain_id;i.value=JSON.stringify({chainId:h,chainName:e.chainName,bech32Config:{bech32PrefixAccAddr:e.bech32Prefix},bip44:{coinType:Number(e.coinType)},feeCurrencies:[{coinDenom:n.display,coinMinimalDenom:n.base,coinDecimals:((m=n.denom_units.find(v=>v.denom===n.display))==null?void 0:m.exponent)||6,coinGeckoId:n.coingecko_id,gasPriceStep:{low:.0625,average:.5,high:62.5}}]},null,"	")}function F(){t.value==="keplr"?window.keplr&&window.keplr.experimentalSuggestChain(JSON.parse(i.value)).catch(e=>{U.value=e}):Z.suggestChain(JSON.parse(i.value))}return(e,n)=>(x(),w("div",ee,[s("div",ne,[b(s("select",{"onUpdate:modelValue":n[0]||(n[0]=a=>g.value=a),class:"select select-bordered"},[s("option",{value:I(r).Mainnet},"Mainnet",8,ae),s("option",{value:I(r).Testnet},"Testnet",8,se)],512),[[O,g.value]]),b(s("select",{"onUpdate:modelValue":n[1]||(n[1]=a=>l.value=a),class:"select select-bordered mx-5",onChange:k},[(x(!0),w(H,null,Q($.value,a=>(x(),w("option",{value:a},y(a.chainName),9,te))),256))],544),[[O,l.value]]),s("label",null,[b(s("input",{type:"radio","onUpdate:modelValue":n[2]||(n[2]=a=>t.value=a),value:"keplr",class:"radio radio-bordered",onChange:k},null,544),[[L,t.value]]),E(" Keplr")]),s("label",null,[b(s("input",{type:"radio","onUpdate:modelValue":n[3]||(n[3]=a=>t.value=a),value:"metamask",class:"radio radio-bordered ml-4",onChange:k},null,544),[[L,t.value]]),E(" Metamask")])]),s("div",oe,[b(s("textarea",{"onUpdate:modelValue":n[4]||(n[4]=a=>i.value=a),class:"textarea textarea-bordered w-full",rows:"15"},null,512),[[W,i.value]])]),s("div",ie,[s("button",{class:"btn !bg-primary !border-primary text-white mr-2",onClick:F},"Suggest "+y(l.value.chainName)+" TO "+y(t.value),1),le]),X(Y,{id:"suggest-banner-ad",unit:"banner",width:"970px",height:"90px"})]))}});export{pe as default};
